{"version":3,"file":"loader.js","names":["module","exports","source","callback","async","options","getOptions","require","type","point"],"sourceRoot":"../../src/cheap/build/webpack/cheap-worker-loader/src","sources":["../src/loader.js"],"sourcesContent":["module.exports = function(source) {\n  let callback = this.async();\n\n  const options = this.getOptions\n    ? this.getOptions()\n    : require('loader-utils-webpack-v4').getOptions(this);\n\n  if (options.type === 'class') {\n    source += `\n      import __cheap_initClass__ from 'cheap/thread/initClass'\n      function __cheap_run__(params: any) {\n        params.unshift(null)\n        return new (Function.prototype.bind.apply(${options.point}, params))()\n      }\n      __cheap_initClass__(__cheap_run__)\n    `;\n  }\n  else if (options.type === 'function') {\n    source += `\n      import __cheap_initFunction__ from 'cheap/thread/initFunction'\n      function __cheap_run__(params: any) {\n        return ${options.point}.apply(self, params)\n      }\n      __cheap_initFunction__(__cheap_run__)\n  `;\n  }\n  else if (options.type === 'module') {\n    source += `\n      import __cheap_initModule__ from 'cheap/thread/initModule'\n      __cheap_initModule__(__webpack_exports__)\n  `;\n  }\n\n  callback(null, source);\n};"],"mappings":";;AAAAA,MAAM,CAACC,OAAO,GAAG,UAASC,MAAM,EAAE;EAChC,IAAIC,QAAQ,GAAG,IAAI,CAACC,KAAK,CAAC,CAAC;EAE3B,MAAMC,OAAO,GAAG,IAAI,CAACC,UAAU,GAC3B,IAAI,CAACA,UAAU,CAAC,CAAC,GACjBC,OAAO,CAAC,yBAAyB,CAAC,CAACD,UAAU,CAAC,IAAI,CAAC;EAEvD,IAAID,OAAO,CAACG,IAAI,KAAK,OAAO,EAAE;IAC5BN,MAAM,IAAK;AACf;AACA;AACA;AACA,oDAAoDG,OAAO,CAACI,KAAM;AAClE;AACA;AACA,KAAK;EACH,CAAC,MACI,IAAIJ,OAAO,CAACG,IAAI,KAAK,UAAU,EAAE;IACpCN,MAAM,IAAK;AACf;AACA;AACA,iBAAiBG,OAAO,CAACI,KAAM;AAC/B;AACA;AACA,GAAG;EACD,CAAC,MACI,IAAIJ,OAAO,CAACG,IAAI,KAAK,QAAQ,EAAE;IAClCN,MAAM,IAAK;AACf;AACA;AACA,GAAG;EACD;EAEAC,QAAQ,CAAC,IAAI,EAAED,MAAM,CAAC;AACxB,CAAC"}